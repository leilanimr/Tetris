{"version":3,"sources":["utils/useTime.js","utils/useRepainter.js","utils/getEmptyBoard.js","utils/deepCopy.js","shapes/shape.js","shapes/rotate.js","shapes/catalog.js","App/App.js","index.js"],"names":["useTime","speed","useState","currentTime","setTime","useEffect","id","setInterval","t","clearInterval","useRepainter","setX","useCallback","x","getEmptyBoard","Array","from","length","deepCopy","unknown","JSON","parse","stringify","sortByBiggerX","x1","x2","sortByBiggerY","y1","sortBySmallerY","Shape","pixels","type","this","sort","bottom","filter","right","left","pieces","board","forEach","piece","getPixels","y","getPixelsAtBottom","every","getPixelsAtLeft","getPixelsAtRight","canMoveX","map","canMoveRight","canMoveLeft","height","RotatedShape","shapes","current","deletePixelHeight","others","shape","moveX","moveRight","moveLeft","getRandomPiece","possibleShapes","Math","floor","random","App","setSpeed","level","setLevel","score","setScore","time","repaint","movingPiece","useRef","isGameRunning","setGame","parseInt","some","pixel","push","document","addEventListener","key","rotate","className","row","i","j","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c71c4918.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\"\r\n\r\nconst useTime = (speed) => {\r\n  const [currentTime, setTime] = useState(0)\r\n\r\n  useEffect(() => {\r\n    const moveByOne = () => setTime(t => t + 1)\r\n    const id = setInterval(moveByOne, speed)\r\n    return () => clearInterval(id)\r\n  }, [speed])\r\n\r\n  return currentTime\r\n}\r\n\r\n\r\n \r\nexport default useTime\r\n\r\n","import { useState, useCallback } from \"react\"\r\n\r\nconst useRepainter = () => {\r\n  const setX = useState(0)[1]\r\n  return useCallback(() => setX(x => x + 1), [setX])\r\n}\r\n\r\nexport default useRepainter\r\n","const getEmptyBoard = () => {\n  const createArray = () => Array.from({ length: 10 }, () => \"empty\")\n  return Array.from({ length: 24 }, createArray)\n}\n\nexport default getEmptyBoard\n","const deepCopy = unknown => JSON.parse(JSON.stringify(unknown))\n\nexport default deepCopy\n","import deepCopy from \"../utils/deepCopy\"\r\nimport getEmptyBoard from \"../utils/getEmptyBoard\"\r\n\r\nconst sortByBiggerX = ([x1, y1], [x2, y2]) => x2 - x1\r\nconst sortByBiggerY = ([x1, y1], [x2, y2]) => y2 - y1\r\nconst sortBySmallerY = ([x1, y1], [x2, y2]) => y1 - y2\r\n\r\nclass Shape {\r\n  type = \"\"\r\n  pixels = []\r\n\r\n  constructor(pixels, type) {\r\n    this.pixels = deepCopy(pixels).sort(sortByBiggerX)\r\n    this.type = type\r\n  }\r\n\r\n  getPixels() {\r\n    return this.pixels\r\n  }\r\n\r\n  getPixelsAtBottom() {\r\n    const currentPixels = deepCopy(this.pixels).sort(sortByBiggerX)\r\n    const bottom = currentPixels[0][0]\r\n    return this.pixels.filter(([x, y]) => x === bottom)\r\n  }\r\n\r\n  getPixelsAtRight() {\r\n    const currentPixels = deepCopy(this.pixels).sort(sortByBiggerY)\r\n    const right = currentPixels[0][1]\r\n    return this.pixels.filter(([x, y]) => y === right)\r\n  }\r\n\r\n  getPixelsAtLeft() {\r\n    const currentPixels = deepCopy(this.pixels).sort(sortBySmallerY)\r\n    const left = currentPixels[0][1]\r\n    return this.pixels.filter(([x, y]) => y === left)\r\n  }\r\n\r\n  canMoveX(pieces) {\r\n    const board = getEmptyBoard()\r\n    pieces.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\r\n\r\n    return this.getPixelsAtBottom().every(([x, y]) => {\r\n      if (x === 23) return false\r\n      if (board[x + 1][y] !== \"empty\") return false\r\n\r\n      return true\r\n    })\r\n  }\r\n\r\n  canMoveLeft(pieces) {\r\n    const board = getEmptyBoard()\r\n    pieces.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\r\n\r\n    return this.getPixelsAtLeft().every(([x, y]) => {\r\n      if (y === 0) return false\r\n      if (board[x][y - 1] !== \"empty\") return false\r\n\r\n      return true\r\n    })\r\n  }\r\n\r\n  canMoveRight(pieces) {\r\n    const board = getEmptyBoard()\r\n    pieces.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\r\n\r\n    return this.getPixelsAtRight().every(([x, y]) => {\r\n      if (y === 10) return false\r\n      if (board[x][y + 1] !== \"empty\") return false\r\n\r\n      return true\r\n    })\r\n  }\r\n\r\n  moveX(pieces) {\r\n    if (!this.canMoveX(pieces)) return\r\n    this.pixels = this.pixels.map(([x, y]) => [x + 1, y])\r\n  }\r\n\r\n  moveRight(pieces) {\r\n    if (!this.canMoveRight(pieces)) return\r\n    this.pixels = this.pixels.map(([x, y]) => [x, y + 1])\r\n  }\r\n\r\n  moveLeft(pieces) {\r\n    if (!this.canMoveLeft(pieces)) return\r\n    this.pixels = this.pixels.map(([x, y]) => [x, y - 1])\r\n  }\r\n\r\n  deletePixelHeight(height) {\r\n    this.pixels = this.pixels.filter(([x, y]) => x !== height)\r\n  }\r\n}\r\n\r\nexport default Shape\r\n","class RotatedShape {\r\n  shapes = []\r\n  current = 0\r\n  type = \"\"\r\n\r\n  constructor(shapes, type) {\r\n    this.shapes = shapes\r\n    this.type = type\r\n  }\r\n\r\n  deletePixelHeight(height) {\r\n    return this.shapes[this.current].deletePixelHeight(height)\r\n  }\r\n\r\n  getShape() {\r\n    return this.shapes[this.current]\r\n  }\r\n\r\n  getPixels() {\r\n    return this.shapes[this.current].getPixels()\r\n  }\r\n\r\n  canMoveX(pieces) {\r\n    const others = pieces.filter(piece => piece !== this)\r\n    return this.shapes[this.current].canMoveX(others)\r\n  }\r\n\r\n  moveX(pieces) {\r\n    const others = pieces.filter(piece => piece !== this)\r\n    return this.shapes.forEach(shape => shape.moveX(others))\r\n  }\r\n\r\n  moveRight(pieces) {\r\n    const others = pieces.filter(piece => piece !== this)\r\n    return this.shapes.forEach(shape => shape.moveRight(others))\r\n  }\r\n\r\n  moveLeft(pieces) {\r\n    const others = pieces.filter(piece => piece !== this)\r\n    return this.shapes.forEach(shape => shape.moveLeft(others))\r\n  }\r\n\r\n  rotate() {\r\n    this.current = (this.current + 1) % this.shapes.length\r\n  }\r\n}\r\n\r\nexport default RotatedShape\r\n","import Shape from \"./shape\"\nimport RotatedShape from \"./rotate\"\n\nconst getl1 = () => {\n  return new Shape(\n    [\n      [3, 4],\n      [2, 4],\n      [1, 4],\n      [0, 4],\n    ],\n    \"l\"\n  )\n}\n\nconst getl2 = () => {\n  return new Shape(\n    [\n      [0, 6],\n      [0, 5],\n      [0, 4],\n      [0, 3],\n    ],\n    \"l\"\n  )\n}\n\nconst getRotatedl = () => {\n  return new RotatedShape([getl2(), getl1()], \"l\")\n}\n\n\nconst getL1 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [2, 4],\n      [1, 4],\n      [0, 4],\n    ],\n    \"L\"\n  )\n}\n\nconst getL2 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [0, 3],\n      [0, 4],\n      [0, 5],\n    ],\n    \"L\"\n  )\n}\n\nconst getL3 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [1, 5],\n      [0, 5],\n      [0, 4],\n    ],\n    \"L\"\n  )\n}\n\nconst getL4 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [1, 4],\n      [1, 5],\n      [0, 5],\n    ],\n    \"L\"\n  )\n}\n\nconst getRotatedL = () => {\n  return new RotatedShape([getL1(), getL2(), getL3(), getL4()], \"L\")\n}\n\nconst getC = () => {\n  return new Shape(\n    [\n      [1, 5],\n      [1, 4],\n      [0, 4],\n      [0, 5],\n    ],\n    \"C\"\n  )\n}\n\nconst getRotatedC = () => {\n  return new RotatedShape([getC()], \"C\")\n}\nconst getZ1 = () => {\n  return new Shape(\n    [\n      [1, 4],\n      [1, 5],\n      [0, 3],\n      [0, 4],\n    ],\n    \"Z\"\n  )\n}\n\nconst getZ2 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [1, 5],\n      [1, 4],\n      [0, 4],\n    ],\n    \"Z\"\n  )\n}\n\nconst getRotatedZ = () => {\n  return new RotatedShape([getZ1(), getZ2()], \"Z\")\n}\n\nconst getT1 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [1, 4],\n      [1, 5],\n      [0, 4],\n    ],\n    \"T\"\n  )\n}\n\nconst getT2 = () => {\n  return new Shape(\n    [\n      [2, 4],\n      [1, 4],\n      [0, 4],\n      [1, 5],\n    ],\n    \"T\"\n  )\n}\n\nconst getT3 = () => {\n  return new Shape(\n    [\n      [1, 4],\n      [0, 4],\n      [0, 3],\n      [0, 5],\n    ],\n    \"T\"\n  )\n}\n\nconst getT4 = () => {\n  return new Shape(\n    [\n      [2, 4],\n      [1, 3],\n      [1, 4],\n      [0, 4],\n    ],\n    \"T\"\n  )\n}\n\nconst getRotatedT = () => {\n  return new RotatedShape([getT1(), getT2(), getT3(), getT4()], \"T\")\n}\n\nconst getLi1 = () => {\n  return new Shape(\n    [\n      [2, 4],\n      [2, 5],\n      [1, 5],\n      [0, 5],\n    ],\n    \"Li\"\n  )\n}\n\nconst getLi2 = () => {\n  return new Shape(\n    [\n      [1, 5],\n      [1, 4],\n      [1, 3],\n      [0, 3],\n    ],\n    \"Li\"\n  )\n}\n\nconst getLi3 = () => {\n  return new Shape(\n    [\n      [2,4],\n      [1, 4],\n      [0, 4],\n      [0, 5],\n    ],\n    \"Li\"\n  )\n}\n\nconst getLi4 = () => {\n  return new Shape(\n    [\n      [1, 5],\n      [0, 5],\n      [0, 4],\n      [0, 3],\n    ],\n    \"Li\"\n  )\n}\n\nconst getRotatedLi = () => {\n  return new RotatedShape([getLi1(), getLi2(), getLi3(), getLi4()], \"Li\")\n}\n\nconst getS1 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [1, 4],\n      [0, 4],\n      [0, 5],\n    ],\n    \"S\"\n  )\n}\n\nconst getS2 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [1, 5],\n      [1, 4],\n      [0, 4],\n    ],\n    \"S\"\n  )\n}\n\nconst getRotatedS = () => {\n  return new RotatedShape([getS1(), getS2()], \"S\")\n}\n\nconst getRandomPiece = () => {\n  const possibleShapes = [getRotatedl(), getRotatedL(),  getRotatedC(), getRotatedZ(), getRotatedT(), getRotatedLi(), getRotatedS()]\n  return possibleShapes[Math.floor(Math.random() * possibleShapes.length)]\n}\n\nexport default getRandomPiece\n","import React, { useRef, useEffect, useState } from \"react\"\r\n\r\nimport useTime from \"../utils/useTime\"\r\nimport useRepainter from \"../utils/useRepainter\"\r\n\r\nimport \"./App.css\"\r\nimport \"../shapes/shape.css\"\r\n\r\nimport getEmptyBoard from \"../utils/getEmptyBoard\"\r\nimport getRandomPiece from \"../shapes/catalog\"\r\n\r\nconst originalSpeed = 500\r\nconst App = () => {\r\n  const [speed, setSpeed] = useState(originalSpeed)\r\n  const [level, setLevel] = useState(0)\r\n  const [score, setScore] = useState(0)\r\n  const time = useTime(speed)\r\n  const repaint = useRepainter()\r\n\r\n  const movingPiece = useRef(getRandomPiece())\r\n  const pieces = useRef([movingPiece.current])\r\n  const [isGameRunning, setGame] = useState(true)\r\n\r\n  useEffect(() => {\r\n    setLevel(parseInt(score / 50))\r\n  }, [score])\r\n\r\n  useEffect(() => {\r\n    pieces.current.forEach(piece => piece.moveX(pieces.current))\r\n    if (!movingPiece.current.canMoveX(pieces.current)) {\r\n      setSpeed(originalSpeed - level * 50)\r\n      if (!movingPiece.current.getPixels().some(([x, y]) => x === 0)) {\r\n        const board = getEmptyBoard()\r\n        pieces.current.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\r\n\r\n        for (let height = 0; height < board.length; ++height) {\r\n          const is_full_line = board[height].every(pixel => pixel !== \"empty\")\r\n          if (is_full_line) {\r\n            setScore(score => score + 10)\r\n            pieces.current.forEach(piece => piece.deletePixelHeight(height))\r\n          }\r\n          pieces.current = pieces.current.filter(piece => piece.getPixels().length !== 0)\r\n        }\r\n\r\n        movingPiece.current = getRandomPiece()\r\n        pieces.current.push(movingPiece.current)\r\n      } else {\r\n        setGame(false)\r\n      }\r\n    }\r\n  }, [time])\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keypress\", ({ key }) => {\r\n      if (key === \"a\") movingPiece.current.moveLeft(pieces.current)\r\n      if (key === \"d\") movingPiece.current.moveRight(pieces.current)\r\n      if (key === \"w\") movingPiece.current.rotate()\r\n      if (key === \"s\") setSpeed(25)\r\n\r\n      if (key === \"a\" || key === \"d\" || key === \"w\") repaint()\r\n    })\r\n  }, [repaint])\r\n\r\n  const board = getEmptyBoard()\r\n  pieces.current.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\r\n\r\n  if (!isGameRunning) {\r\n    return (\r\n      <>\r\n        <h1>Game Over</h1>\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <section className=\"App\">\r\n      <section className=\"board\">\r\n        {board.map((row, i) => (\r\n          <div className=\"row\" key={i}>\r\n            {row.map((type, j) => (\r\n              <div key={`${type} ${i} ${j}`} className={\"pixel \" + type}>\r\n                {type !== \"empty\" ? <div className=\"minipixel\" /> : null}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </section>\r\n\r\n      <section className=\"stats\">\r\n        <h3>Puntuacion = {score}</h3>\r\n        <h3>Nivel = {level}</h3>\r\n      </section>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\n\nimport App from \"./App/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}