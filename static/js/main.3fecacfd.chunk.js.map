{"version":3,"sources":["utils/useTime.js","utils/useRepainter.js","utils/getEmptyBoard.js","utils/deepCopy.js","shapes/shape.js","shapes/rotate.js","shapes/catalog.js","App/App.js","index.js"],"names":["useTime","speed","useState","currentTime","setTime","useEffect","id","setInterval","t","clearInterval","useRepainter","setX","useCallback","x","getEmptyBoard","Array","from","length","deepCopy","unknown","JSON","parse","stringify","sortByBiggerX","x1","x2","sortByBiggerY","y1","sortBySmallerY","Shape","pixels","type","this","sort","bottom","filter","right","left","pieces","board","forEach","piece","getPixels","y","getPixelsAtBottom","every","getPixelsAtLeft","getPixelsAtRight","canMoveX","map","canMoveRight","canMoveLeft","height","RotatedShape","shapes","current","deletePixelHeight","others","shape","moveX","moveRight","moveLeft","getRandomPiece","possibleShapes","Math","floor","random","App","setSpeed","level","setLevel","score","setScore","time","repaint","movingPiece","useRef","isGameRunning","setGame","parseInt","some","pixel","push","document","addEventListener","key","rotate","className","row","i","j","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3fecacfd.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\"\n\nconst useTime = (speed) => {\n  const [currentTime, setTime] = useState(0)\n\n  useEffect(() => {\n    const moveByOne = () => setTime(t => t + 1)\n    const id = setInterval(moveByOne, speed)\n    return () => clearInterval(id)\n  }, [speed])\n\n  return currentTime\n}\n\n\n \nexport default useTime\n\n","import { useState, useCallback } from \"react\"\n\nconst useRepainter = () => {\n  const setX = useState(0)[1]\n  return useCallback(() => setX(x => x + 1), [setX])\n}\n\nexport default useRepainter\n","const getEmptyBoard = () => {\n  const createArray = () => Array.from({ length: 10 }, () => \"empty\")\n  return Array.from({ length: 24 }, createArray)\n}\n\nexport default getEmptyBoard\n","const deepCopy = unknown => JSON.parse(JSON.stringify(unknown))\n\nexport default deepCopy\n","import deepCopy from \"../utils/deepCopy\"\nimport getEmptyBoard from \"../utils/getEmptyBoard\"\n\nconst sortByBiggerX = ([x1, y1], [x2, y2]) => x2 - x1\nconst sortByBiggerY = ([x1, y1], [x2, y2]) => y2 - y1\nconst sortBySmallerY = ([x1, y1], [x2, y2]) => y1 - y2\n\nclass Shape {\n  type = \"\"\n  pixels = []\n\n  constructor(pixels, type) {\n    this.pixels = deepCopy(pixels).sort(sortByBiggerX)\n    this.type = type\n  }\n\n  getPixels() {\n    return this.pixels\n  }\n\n  getPixelsAtBottom() {\n    const currentPixels = deepCopy(this.pixels).sort(sortByBiggerX)\n    const bottom = currentPixels[0][0]\n    return this.pixels.filter(([x, y]) => x === bottom)\n  }\n\n  getPixelsAtRight() {\n    const currentPixels = deepCopy(this.pixels).sort(sortByBiggerY)\n    const right = currentPixels[0][1]\n    return this.pixels.filter(([x, y]) => y === right)\n  }\n\n  getPixelsAtLeft() {\n    const currentPixels = deepCopy(this.pixels).sort(sortBySmallerY)\n    const left = currentPixels[0][1]\n    return this.pixels.filter(([x, y]) => y === left)\n  }\n\n  canMoveX(pieces) {\n    const board = getEmptyBoard()\n    pieces.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\n\n    return this.getPixelsAtBottom().every(([x, y]) => {\n      if (x === 23) return false\n      if (board[x + 1][y] !== \"empty\") return false\n\n      return true\n    })\n  }\n\n  canMoveLeft(pieces) {\n    const board = getEmptyBoard()\n    pieces.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\n\n    return this.getPixelsAtLeft().every(([x, y]) => {\n      if (y === 0) return false\n      if (board[x][y - 1] !== \"empty\") return false\n\n      return true\n    })\n  }\n\n  canMoveRight(pieces) {\n    const board = getEmptyBoard()\n    pieces.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\n\n    return this.getPixelsAtRight().every(([x, y]) => {\n      if (y === 10) return false\n      if (board[x][y + 1] !== \"empty\") return false\n\n      return true\n    })\n  }\n\n  moveX(pieces) {\n    if (!this.canMoveX(pieces)) return\n    this.pixels = this.pixels.map(([x, y]) => [x + 1, y])\n  }\n\n  moveRight(pieces) {\n    if (!this.canMoveRight(pieces)) return\n    this.pixels = this.pixels.map(([x, y]) => [x, y + 1])\n  }\n\n  moveLeft(pieces) {\n    if (!this.canMoveLeft(pieces)) return\n    this.pixels = this.pixels.map(([x, y]) => [x, y - 1])\n  }\n\n  deletePixelHeight(height) {\n    this.pixels = this.pixels.filter(([x, y]) => x !== height)\n  }\n}\n\nexport default Shape\n","class RotatedShape {\n  shapes = []\n  current = 0\n  type = \"\"\n\n  constructor(shapes, type) {\n    this.shapes = shapes\n    this.type = type\n  }\n\n  deletePixelHeight(height) {\n    return this.shapes[this.current].deletePixelHeight(height)\n  }\n\n  getShape() {\n    return this.shapes[this.current]\n  }\n\n  getPixels() {\n    return this.shapes[this.current].getPixels()\n  }\n\n  canMoveX(pieces) {\n    const others = pieces.filter(piece => piece !== this)\n    return this.shapes[this.current].canMoveX(others)\n  }\n\n  moveX(pieces) {\n    const others = pieces.filter(piece => piece !== this)\n    return this.shapes.forEach(shape => shape.moveX(others))\n  }\n\n  moveRight(pieces) {\n    const others = pieces.filter(piece => piece !== this)\n    return this.shapes.forEach(shape => shape.moveRight(others))\n  }\n\n  moveLeft(pieces) {\n    const others = pieces.filter(piece => piece !== this)\n    return this.shapes.forEach(shape => shape.moveLeft(others))\n  }\n\n  rotate() {\n    this.current = (this.current + 1) % this.shapes.length\n  }\n}\n\nexport default RotatedShape\n","import Shape from \"./shape\"\nimport RotatedShape from \"./rotate\"\n\nconst getl1 = () => {\n  return new Shape(\n    [\n      [3, 4],\n      [2, 4],\n      [1, 4],\n      [0, 4],\n    ],\n    \"l\"\n  )\n}\n\nconst getl2 = () => {\n  return new Shape(\n    [\n      [0, 6],\n      [0, 5],\n      [0, 4],\n      [0, 3],\n    ],\n    \"l\"\n  )\n}\n\nconst getRotatedl = () => {\n  return new RotatedShape([getl2(), getl1()], \"l\")\n}\n\n\nconst getL1 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [2, 4],\n      [1, 4],\n      [0, 4],\n    ],\n    \"L\"\n  )\n}\n\nconst getL2 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [0, 3],\n      [0, 4],\n      [0, 5],\n    ],\n    \"L\"\n  )\n}\n\nconst getL3 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [1, 5],\n      [0, 5],\n      [0, 4],\n    ],\n    \"L\"\n  )\n}\n\nconst getL4 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [1, 4],\n      [1, 5],\n      [0, 5],\n    ],\n    \"L\"\n  )\n}\n\nconst getRotatedL = () => {\n  return new RotatedShape([getL1(), getL2(), getL3(), getL4()], \"L\")\n}\n\nconst getC = () => {\n  return new Shape(\n    [\n      [1, 5],\n      [1, 4],\n      [0, 4],\n      [0, 5],\n    ],\n    \"C\"\n  )\n}\n\nconst getRotatedC = () => {\n  return new RotatedShape([getC()], \"C\")\n}\nconst getZ1 = () => {\n  return new Shape(\n    [\n      [1, 4],\n      [1, 5],\n      [0, 3],\n      [0, 4],\n    ],\n    \"Z\"\n  )\n}\n\nconst getZ2 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [1, 5],\n      [1, 4],\n      [0, 4],\n    ],\n    \"Z\"\n  )\n}\n\nconst getRotatedZ = () => {\n  return new RotatedShape([getZ1(), getZ2()], \"Z\")\n}\n\nconst getT1 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [1, 4],\n      [1, 5],\n      [0, 4],\n    ],\n    \"T\"\n  )\n}\n\nconst getT2 = () => {\n  return new Shape(\n    [\n      [2, 4],\n      [1, 4],\n      [0, 4],\n      [1, 5],\n    ],\n    \"T\"\n  )\n}\n\nconst getT3 = () => {\n  return new Shape(\n    [\n      [1, 4],\n      [0, 4],\n      [0, 3],\n      [0, 5],\n    ],\n    \"T\"\n  )\n}\n\nconst getT4 = () => {\n  return new Shape(\n    [\n      [2, 4],\n      [1, 3],\n      [1, 4],\n      [0, 4],\n    ],\n    \"T\"\n  )\n}\n\nconst getRotatedT = () => {\n  return new RotatedShape([getT1(), getT2(), getT3(), getT4()], \"T\")\n}\n\nconst getLi1 = () => {\n  return new Shape(\n    [\n      [2, 4],\n      [2, 5],\n      [1, 5],\n      [0, 5],\n    ],\n    \"Li\"\n  )\n}\n\nconst getLi2 = () => {\n  return new Shape(\n    [\n      [1, 5],\n      [1, 4],\n      [1, 3],\n      [0, 3],\n    ],\n    \"Li\"\n  )\n}\n\nconst getLi3 = () => {\n  return new Shape(\n    [\n      [2,4],\n      [1, 4],\n      [0, 4],\n      [0, 5],\n    ],\n    \"Li\"\n  )\n}\n\nconst getLi4 = () => {\n  return new Shape(\n    [\n      [1, 5],\n      [0, 5],\n      [0, 4],\n      [0, 3],\n    ],\n    \"Li\"\n  )\n}\n\nconst getRotatedLi = () => {\n  return new RotatedShape([getLi1(), getLi2(), getLi3(), getLi4()], \"Li\")\n}\n\nconst getS1 = () => {\n  return new Shape(\n    [\n      [1, 3],\n      [1, 4],\n      [0, 4],\n      [0, 5],\n    ],\n    \"S\"\n  )\n}\n\nconst getS2 = () => {\n  return new Shape(\n    [\n      [2, 5],\n      [1, 5],\n      [1, 4],\n      [0, 4],\n    ],\n    \"S\"\n  )\n}\n\nconst getRotatedS = () => {\n  return new RotatedShape([getS1(), getS2()], \"S\")\n}\n\nconst getRandomPiece = () => {\n  const possibleShapes = [getRotatedl(), getRotatedL(),  getRotatedC(), getRotatedZ(), getRotatedT(), getRotatedLi(), getRotatedS()]\n  return possibleShapes[Math.floor(Math.random() * possibleShapes.length)]\n}\n\nexport default getRandomPiece\n","import React, { useRef, useEffect, useState } from \"react\"\n\nimport useTime from \"../utils/useTime\"\nimport useRepainter from \"../utils/useRepainter\"\n\nimport \"./App.css\"\nimport \"../shapes/shape.css\"\n\nimport getEmptyBoard from \"../utils/getEmptyBoard\"\nimport getRandomPiece from \"../shapes/catalog\"\n\nconst originalSpeed = 300\nconst App = () => {\n  const [speed, setSpeed] = useState(originalSpeed)\n  const [level, setLevel] = useState(0)\n  const [score, setScore] = useState(0)\n  const time = useTime(speed)\n  const repaint = useRepainter()\n\n  const movingPiece = useRef(getRandomPiece())\n  const pieces = useRef([movingPiece.current])\n  const [isGameRunning, setGame] = useState(true)\n\n  useEffect(() => {\n    setLevel(parseInt(score / 50))\n  }, [score]) \n\n  useEffect(() => {\n    pieces.current.forEach(piece => piece.moveX(pieces.current))\n    if (!movingPiece.current.canMoveX(pieces.current)) {\n      setSpeed(originalSpeed - (level * 50))\n      if (!movingPiece.current.getPixels().some(([x, y]) => x === 0)) {\n        const board = getEmptyBoard()\n        pieces.current.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\n\n        for (let height = 0; height < board.length; ++height) {\n          const is_full_line = board[height].every(pixel => pixel !== \"empty\")\n          if (is_full_line) {\n            setScore(score => score + 10)\n            pieces.current.forEach(piece => piece.deletePixelHeight(height))\n          }\n          pieces.current = pieces.current.filter(piece => piece.getPixels().length !== 0)\n        }\n\n        movingPiece.current = getRandomPiece()\n        pieces.current.push(movingPiece.current)\n      } else {\n        setGame(false)\n      }\n    }\n  }, [time])\n\n  useEffect(() => {\n    document.addEventListener(\"keypress\", ({ key }) => {\n      if (key === \"a\") movingPiece.current.moveLeft(pieces.current)\n      if (key === \"d\") movingPiece.current.moveRight(pieces.current)\n      if (key === \"w\") movingPiece.current.rotate()\n      if (key === \"s\") setSpeed(25)\n\n      if (key === \"a\" || key === \"d\" || key === \"w\") repaint()\n    })\n  }, [repaint])\n\n  const board = getEmptyBoard()\n  pieces.current.forEach(piece => piece.getPixels().forEach(([x, y]) => (board[x][y] = piece.type)))\n\n  if (!isGameRunning) {\n    return (\n      <>\n        <h1>Game Over</h1>\n      </>\n    )\n  }\n\n  return (\n    <section className=\"App\">\n      <section className=\"board\">\n        {board.map((row, i) => (\n          <div className=\"row\" key={i}>\n            {row.map((type, j) => (\n              <div key={`${type} ${i} ${j}`} className={\"pixel \" + type}>\n                {type !== \"empty\" ? <div className=\"minipixel\" /> : null}\n              </div>\n            ))}\n          </div>\n        ))}\n      </section>\n\n      <section className=\"stats\">\n        <h3>Timer = {time}</h3>\n        <h3>Score = {score}</h3>\n        <h3>Level = {level}</h3>\n        <h3>Speed = {speed}ms</h3>\n      </section>\n    </section>\n  )\n}\n\nexport default App\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.css\";\n\nimport App from \"./App/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}